;***************************************************;
;       Sunton ESP32-WROOM custom dev board with    ;
;               - ST7789 TFT 8BIT PARALLEL          ;
;               - CST816S touch controller          ;
;***************************************************;

[esp32-2432s022]
extends = arduino_esp32_v2 # flash_4mb # esp32-2432s022, flash_4mb
board = esp32dev

build_flags =
    ${arduino_esp32_v2.build_flags}
    ${esp32.no_ps_ram}
    ${esp32.hspi}   

    -D USER_SETUP_LOADED=1
    -D ST7789_DRIVER=1
    -D ESP32_PARALLEL=1

    -D TFT_ROTATION=0
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320

    -D TFT_BCKL=0 ;None, configurable via web UI (e.g. 2 for D4)
    -D TFT_CS=17 ; Chip select control pin
    -D TFT_RST=-1 ; Reset pin
    -D TFT_DC=16
    -D TFT_WR=4 ; Write strobe control pin - must use a pin in the range 0-31
    -D TFT_RD=2
    -D TFT_D0=15 
    -D TFT_D1=13 
    -D TFT_D2=12
    -D TFT_D3=14
    -D TFT_D4=27
    -D TFT_D5=25
    ; HACK https://github.com/Bodmer/TFT_eSPI/issues/3281
    -D TFT_D6=26 # 33
    -D TFT_D7=5 # 32

    ;CST816S driver
    -D TOUCH_DRIVER=0x816
    -D TOUCH_SDA=21
    -D TOUCH_SCL=22
    -D I2C_TOUCH_PORT=0
    -D I2C_TOUCH_ADDRESS=0x15
    -D TOUCH_RST=-1
    -D TOUCH_IRQ=0 

lib_deps =
    ${arduino_esp32_v2.lib_deps}
    ${tft_espi.lib_deps}
    ${cst816s.lib_deps}


; [esp32-2432s022]
; extends = arduino_esp32_v2 # flash_4mb # esp32-2432s022, flash_4mb
; board = esp32dev
; upload_speed = 921600

; build_flags =
;     ${arduino_esp32_v2.build_flags}
;     ${esp32.no_ps_ram}

;     -D LGFX_USE_V1=1

;     -D ST7789_DRIVER=1
;     -D ESP32_PARALLEL=1

;     -D TFT_ROTATION=0
;     -D TFT_WIDTH=240
;     -D TFT_HEIGHT=320

;     -D TFT_BCKL=0 ;None, configurable via web UI (e.g. 2 for D4)
;     -D TFT_CS=17 ; Chip select control pin
;     -D TFT_RST=-1 ; Reset pin
;     -D TFT_DC=16
;     -D TFT_WR=4 ; Write strobe control pin - must use a pin in the range 0-31
;     -D TFT_RD=2
;     -D TFT_D0=15 ; Must use pins in the range 0-31 for the data bus
;     -D TFT_D1=13 ; so a single register write sets/clears all bits
;     -D TFT_D2=12
;     -D TFT_D3=14
;     -D TFT_D4=27
;     -D TFT_D5=25
;     -D TFT_D6=26 # 33
;     -D TFT_D7=5 # 32

;     ; ;CST816S driver
;     -D TOUCH_DRIVER=0x816
;     -D HASP_USE_LGFX_TOUCH=1
;     -D TOUCH_SDA=21
;     -D TOUCH_SCL=22
;     -D TOUCH_IRQ=0 ; use 34-39 as these are input only pins
;     -D TOUCH_RST=-1 ; not used, connected to 3.3V
;     ; -D SUPPORT_TRANSACTIONS
;     ; -D TOUCH_OFFSET_ROTATION=0
;     -D I2C_TOUCH_FREQUENCY=400000
;     ; ;-D I2C_TOUCH_PORT=1
;     -D I2C_TOUCH_ADDRESS=0x15
;     -D SPI_FREQUENCY=40000000
;     -D SPI_TOUCH_FREQUENCY=2500000
;     -D SPI_READ_FREQUENCY=20000000
; lib_deps =
;     ${arduino_esp32_v2.lib_deps}
;     ${lovyangfx.lib_deps}

[env:esp32-2432s022c_4MB]
extends = esp32-2432s022, flash_4mb
